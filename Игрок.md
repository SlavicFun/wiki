# Игрок

- Активный персонаж
- История персонажей
- Баланс
- Убежище

## Баланс

Изменяется когда прилетает событие c id персонажа, суммой и оператором(сложение\вычитание).
Функция изменения баланса отвечает событию булевым значением о успешности выполнения и итоговым балансом

## Убежище

- Фон
- Локация
- Размер склада

В нем хранятся деньги, доступное оружие и шмот.

После смерти персонажа, убежище сохраняется и новый персонаж появляется в нем.

У игрока может быть только одно убежище.

Игрок выбирает в какой локации купить убежище.

При покупке нового убежище - все что находилсь в складе старого - переносится в новое.(В базе заменяется локация убежища, фон и размер склада)

## Персонаж

Есть таблица персонажей привязанных по player_id к игроку.
У каждого персонажа есть статус Мертв\Жив.
Нового персонажа игрок может создать только если у него нет ни одного персонажа со статусом Жив.

- Позывной
- Фракция
- Количество фрагов
- Опыт
  - Защитник
  - Штурмовик
  - Разведчик
  - Снайпер
  - Оператор дрона
  - Оператор ПВО
- Аватар
  - Фон
  - Фото игрока без шмота
  - Итоговый аватар
- Собственность
  - Оружие
  - Медали(Ачивки)
  - Шмот
    - Головной убор
    - Очки\Маска
    - Шея
    - Торс
    - Перчатки
    - Ноги
    - Бронежилет

### Позывной

Генерируется или вводится игроком

### Фракция

Выбирается в начале игры. Нельзя сменить до смерти персонажа.

### Количество фрагов

Изменяется по вызову события. Событие инициирует завершенное задание.
Для работы функции необходимы: id персонажа, количество фрагов полученных на задании. Функция складывает старое значение количества фрагов с новым.

### Опыт

Изменяется по вызову события. Событие инициирует завершенное задание.
Для работу функции необходимы: id персонажа, id локации задания, id класса задания, количество фрагов полученных на задании.
В зависимости от класса, количество фрагов полученных на задании умножается на коэффицент повышения опыта для данного класса в локации.

### Аватар

#### Фон

Генерируется за счет убежища.

#### Фото игрока без шмота

Генерируется во время создания персонажа. Нельзя поменять пока жив персонаж.
На персонаже при генерации всегда есть наручная повязка с гербом и цветом фракции.

#### Итоговый Аватар

Статичен. Генерируется заного если прилетает событие. Инициатором события будет любое изменение активной собственности или убежища.

### Собственность

Та собственность, что находится на персонаже.

Выбирается из списка доступных. Список доступных можно пополнять за внутриигровую валюту.

Меткость повышает шанс на успешное попадание.
Броня повышает шанс на выживание.
Ловкость повышает шанс на выживание.
Удача повышает шансы на сохрание имущества в случае смерти, выживание и успешное попадаение.

#### Оружие

Повышает меткость.

#### Шмот

##### Головной убор

Повышает меткость\броню.

##### Очки\Маска

Повышает меткость\броню.

##### Шея

Повышает удачу.

##### Торс

Повышает ловкость\броню.

##### Перчатки

Повышает ловкость\удачу.

##### Ноги

Повышает ловкость\броню.

##### Бронежилет

Повышает броню и всегда понижает ловкость.
